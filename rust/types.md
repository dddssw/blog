---
outline: deep
---
与 JavaScript 或 Python 等动态类型语言相比，Rust 需要你提前做出更多规划。你必须明确
写出各个函数参数和返回值的类型、结构体字段以及一些其他结构体

但是rust支持类型推断,和泛型能帮我们减轻这方面的压力


# 类型推断可能不会进行
```rust
println!("{}", (-4).abs());//报错
```
令人不解：明明所有的有符号整型都有一个 abs 方法，那么问题出在哪里呢？出于技术原因，Rust 在调用类型本身的方法之前必须确切地知道一个值属于哪种整型。只有在解析完所有方法调用后类型仍然不明确的时候，才会默认为 i32，但这里并没有其他方法可供解析，因此 Rust 提供不了帮助。解决方案是加上后缀或使用特定类型的函数来明确写出希望的类型

另外,方法调用的优先级高于一元前缀运算符，因此在将方法应用于负值时要小心
# 数据类型

## 整数类型

- **i8**: 8 位宽有符号整数
- **i16**: 16 位宽有符号整数
- **i32**: 32 位宽有符号整数
- **i64**: 64 位宽有符号整数
- **i128**: 128 位宽有符号整数
- **u8**: 8 位宽无符号整数
- **u16**: 16 位宽无符号整数
- **u32**: 32 位宽无符号整数
- **u64**: 64 位宽无符号整数
- **u128**: 128 位宽无符号整数
- **isize**: 与机器字大小（32 位或 64 位）一样大的符号整数
- **usize**: 与机器字大小（32 位或 64 位）一样大的无符号整数


Rust 中的整型字面量可以带上一个后缀来指示它们的类型：42u8 是 u8 类型，1729isize是 isize 类型

前缀 0x、0o 和 0b 分别表示十六进制字面量、八进制字面量和二进制字面量

为了让长数值更易读，可以在数字之间任意插入下划线。例如，可以将 u32 的最大值写为4_294_967_295。下划线的具体位置无关紧要，因此也可以将十六进制数或二进制数按 4 位数字而非 3 位数字进行分组（如 0xffff_ffff），或分隔开数字的类型后缀（如127_u8）

::: tip
尽管数值类型和 char 类型是不同的，但 Rust 确实为 u8 值提供了字节字面量。与字符字面量类似，b'X' 表示以字符 X 的 ASCII 码作为 u8 值。例如，由于 A 的 ASCII 码是 65，因此字面量 b'A' 和 65u8 完全等效。只有 ASCII 字符才能出现在字节字面量中
:::
## 浮点类型

- **f32**: 单精度 IEEE 浮点数
- **f64**: 双精度 IEEE 浮点数

## 布尔类型

- **bool**: 布尔值

rust非常严苛,他不会进行隐式转换.像 if 和 while 这样的控制结构要求它们的条件必须是 bool 表达式，短路逻辑运算符 && 和 || 也是如此。你必须写成 if x !=
0 { ... }，而不能只写成 if x { ... }

as 运算符可以将 bool 值转换为整型,但是无法反向转换
## 字符类型

- **char**: Unicode 字符，32 位宽（4 字节）

## 元组类型

- **(char, u8, i32)**: 元组，允许混合类型
- **()**: 单元类型（空元组）,函数没有返回,默认就是返回它()


元组的每个元素可以有不同的类型，而数组的元素必须都是相同的类型。另一方面，元组只允许用常量作为索引，比如 t.4。不能通过写成 t.i 或 t[i] 的形式来获取第 i 个元素。


字面量 ("lonely hearts",) 就是一个包含单个字符串的元组，它的类型是 (&str,).值后面的逗号是必需的，以用于区分单值元组和简单的括号表达式
## 结构体类型

- **struct S { x: f32, y: f32 }**: 具名字段型结构体
- **struct T(i32, char);**: 元组型结构体
- **struct E;**: 单元型结构体，无字段

## 枚举类型

- **enum Attend { OnTime, Late(u32)}**: 枚举，或代数数据类型

## 指针类型

- **Box`<Attend>`**: Box：指向堆中值的拥有型指针
- **&i32, &mut i32**: 共享引用和可变引用：非拥有型指针，能够超出引用目标

## 字符串类型

- **String**: UTF-8 字符串，动态分配大小
- **&str**: 对 `str` 的引用：指向 UTF-8 文本的非拥有型指针

## 数组类型

- **[f64; 4]**: 数组，固定长度，其元素类型为 `f64`
- **[u8; 256]**: 数组，固定长度，其元素类型为 `u8`


## 向量类型

- **`Vec<f64>`**: 向量，可变长度，其元素类型为 `f64`

## 切片类型

- **&[u8]**: 对切片（数组或向量某一部分）的引用，类型为 `u8`
- **&mut [u8]**: 对切片（数组或向量某一部分）的可变引用，类型为 `u8`

## 可选类型

- **Option<&str>**: 可选值：要么为 `None`（无值），要么为 `Some(v)`（有值，其值为 `v`）

## 结果类型

- **Result<u64, Error>**: 可能失败的操作结果：要么为成功值（`Ok(v)`），要么为错误值（`Err(e)`）

## 特型对象类型

- **&dyn Any**: 特型对象，指向任何实现了 `Any` 特性（trait）的类型
- **&mut dyn Read**: 特型对象，指向任何实现了 `Read` 特性（trait）的类型
